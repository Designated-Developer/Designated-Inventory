<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory App</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">
    <header class="text-center mb-6">
        <h1 class="text-4xl font-extrabold text-gray-900">Inventory Management</h1>
        <p class="text-gray-500">Streamline your inventory process with ease.</p>
    </header>

    <main class="max-w-4xl mx-auto">
        <!-- Store Selector -->
        <div class="mb-6 flex justify-between items-center">
            <label for="store" class="text-lg font-medium">Select Store</label>
            <select id="store" class="w-1/2 p-2 border rounded-lg shadow-sm">
                <option value="Tom's Variety">Tom's Variety</option>
                <option value="Herms Sports">Herms Sports</option>
                <option value="Kilworth HH">Kilworth HH</option>
                <option value="St. Thomas HH">St. Thomas HH</option>
            </select>
        </div>

        <!-- Beer List -->
        <section id="beer-list" class="grid grid-cols-3 gap-6">
            <!-- Beer items will be dynamically populated here -->
        </section>

        <!-- Deliver To Section -->
        <section class="mt-10">
            <h2 class="text-2xl font-bold mb-4">Deliver to</h2>
            <div id="delivery-sections">
                <!-- Dynamic delivery sections for each store -->
            </div>
            <div class="mt-6 flex space-x-4">
                <button id="export-button" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">Export to CSV</button>
                <button id="email-button" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600">Email CSV</button>
            </div>
        </section>
    </main>

    <script>
        const stores = {
            "Tom's Variety": [
                "Amber Brew", "Citrus Spritz", "Hoppy Lager", "Golden Ale", "Crisp Wheat", "Smooth Stout", "Dark Roast Ale", "Honey Blonde Ale",
                "Berry Delight", "Tropical IPA", "Malt Classic", "Fruity Radler", "Pale Ale", "Winter Spice", "Lime Lager", "Peach Wheat",
                "Cherry Red Ale", "Classic Porter", "Summer Blonde", "Coconut Ale", "Double IPA", "Caramel Cream", "Vanilla Brew", "Pineapple Pale Ale",
                "Mango Twist", "Grapefruit Lager", "Chocolate Ale", "Roasted Brown", "Cider Ale", "Nutty Lager", "Amber Spice", "Berry Fusion",
                "Honey Apple", "Apple Lager", "Smooth Cream Ale", "Rich Porter", "Bold Wheat", "Wild Berry Lager", "Dark Honey Ale"
            ],
            "Herms Sports": [
                "Hazy IPA", "Crisp Lager", "Light Radler", "Black Currant Ale", "Lemon Wheat", "Maple Brew", "Tart Cherry", "Bourbon Ale",
                "Ginger Beer", "Vanilla Lager", "Orange Wheat", "Cinnamon Stout", "Berry Cider", "Tropical Blonde", "Mint Ale", "Classic Amber",
                "Herbal Lager", "Peach Ale", "Golden IPA", "Dark Amber", "Rich Lager", "Smooth Porter", "Ginger Snap", "Maple Cream",
                "Spicy Stout", "Mild Ale", "Velvet Stout", "Sweet Honey Ale", "Sour Raspberry", "Lemon Cream", "Zesty Lager", "Pine Lager",
                "Tart Lime Ale", "Orange Pale Ale", "Brewed Cocoa", "Bold Malt", "Hoppy Wheat", "Crisp Cider", "Vanilla Ale"
            ],
            "Kilworth HH": [
                "Frosty Pale Ale", "Lush Stout", "Amber Radler", "Hazy Cream Ale", "Sour Cherry Lager", "Crisp Blonde", "Mango Cream", "Dark Roast",
                "Spiced Ale", "Rich IPA", "Berry Wheat", "Golden Brew", "Smooth Stout", "Caramel Lager", "Coconut Ale", "Honey Radler",
                "Hoppy Amber", "Crisp Porter", "Velvet Wheat", "Tropical IPA", "Grapefruit Ale", "Winter Wheat", "Berry Brew", "Light Lager",
                "Maple Amber", "Mint Stout", "Bold IPA", "Cream Lager"
            ],
            "St. Thomas HH": [
                "Sweet Stout", "Rich Pale Ale", "Crisp Ale", "Lemon Lager", "Bold Cream Ale", "Vanilla Stout", "Orange Brew", "Berry Cream",
                "Tart IPA", "Spicy Wheat", "Fruity Lager", "Tropical Stout", "Coconut Porter", "Maple Wheat", "Herbal Ale", "Golden Cider",
                "Amber IPA", "Hoppy Radler", "Caramel Cream Ale", "Velvet Cider", "Mint Lager", "Zesty Amber", "Smooth Malt", "Wild Berry Stout",
                "Sour Ale", "Dark Lager", "Chocolate Stout", "Honey Porter"
            ]
        };

        const selectedItems = {
            "Tom's Variety": [],
            "Herms Sports": [],
            "Kilworth HH": [],
            "St. Thomas HH": []
        };

        const storeSelect = document.getElementById('store');
        const beerList = document.getElementById('beer-list');
        const deliverySections = document.getElementById('delivery-sections');

        function renderBeerList(store) {
            beerList.innerHTML = '';
            stores[store].forEach(beer => {
                const beerItem = document.createElement('div');
                beerItem.className = "beer-item bg-white p-4 border rounded-lg shadow-md hover:shadow-lg";
                beerItem.innerHTML = `
                    <img src="https://via.placeholder.com/100" alt="${beer}" class="mx-auto mb-2">
                    <p class="font-semibold">${beer}</p>
                    <button class="add-button bg-blue-600 text-white px-4 py-2 rounded-lg mt-3 hover:bg-blue-700" data-name="${beer}">Add</button>
                `;
                beerList.appendChild(beerItem);
            });

            document.querySelectorAll('.add-button').forEach(button => {
                button.addEventListener('click', () => {
                    const beerName = button.getAttribute('data-name');
                    const quantity = prompt(`Enter quantity for ${beerName}:`);

                    if (quantity && !isNaN(quantity)) {
                        selectedItems[store].push({ name: beerName, quantity: parseInt(quantity, 10) });
                        renderDeliverySections();
                    } else {
                        alert('Please enter a valid number.');
                    }
                });
            });
        }

        function renderDeliverySections() {
            deliverySections.innerHTML = '';
            for (const store in selectedItems) {
                const section = document.createElement('div');
                section.className = "mb-6";
                section.innerHTML = `<h3 class="text-xl font-bold">${store}</h3>`;

                const ul = document.createElement('ul');
                ul.className = "bg-white p-6 border rounded-lg shadow-md space-y-3";
                selectedItems[store].forEach((item, index) => {
                    const li = document.createElement('li');
                    li.className = "flex justify-between items-center border-b py-2";
                    li.innerHTML = `
                        <span>${item.name}: ${item.quantity}</span>
                        <div>
                            <button class="edit-button text-blue-600 mr-4" data-store="${store}" data-index="${index}">Edit</button>
                            <button class="delete-button text-red-600" data-store="${store}" data-index="${index}">Delete</button>
                        </div>
                    `;
                    ul.appendChild(li);
                });
                section.appendChild(ul);
                deliverySections.appendChild(section);
            }

            document.querySelectorAll('.edit-button').forEach(button => {
                button.addEventListener('click', () => {
                    const store = button.getAttribute('data-store');
                    const index = button.getAttribute('data-index');
                    const newQuantity = prompt(`Edit quantity for ${selectedItems[store][index].name}:`, selectedItems[store][index].quantity);

                    if (newQuantity && !isNaN(newQuantity)) {
                        selectedItems[store][index].quantity = parseInt(newQuantity, 10);
                        renderDeliverySections();
                    } else {
                        alert('Please enter a valid number.');
                    }
                });
            });

            document.querySelectorAll('.delete-button').forEach(button => {
                button.addEventListener('click', () => {
                    const store = button.getAttribute('data-store');
                    const index = button.getAttribute('data-index');
                    selectedItems[store].splice(index, 1);
                    renderDeliverySections();
                });
            });
        }

        storeSelect.addEventListener('change', () => {
            renderBeerList(storeSelect.value);
        });

        renderBeerList(storeSelect.value);
        renderDeliverySections();

        document.getElementById('export-button').addEventListener('click', () => {
            const csvContent = "data:text/csv;charset=utf-8," +
                Object.entries(selectedItems).map(([store, items]) => {
                    return items.map(item => `${store},${item.name},${item.quantity}`).join("\n");
                }).join("\n");

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'inventory.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });

        document.getElementById('email-button').addEventListener('click', () => {
            const csvContent = Object.entries(selectedItems).map(([store, items]) => {
                return items.map(item => `${store},${item.name},${item.quantity}`).join("\n");
            }).join("\n");

            const mailtoLink = `mailto:?subject=Inventory Report&body=${encodeURIComponent(csvContent)}`;
            window.location.href = mailtoLink;
        });
    </script>
</body>
</html>
